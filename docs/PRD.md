# travis-blog - Product Requirements Document

**Author:** Travis  
**Date:** 2025-11-12  
**Version:** 1.0

---

## Executive Summary

Travis-blog 是一个个人博客网站项目，旨在通过完整的 Vibe 开发流程实现学习、分享和建立个人品牌的目标。这是一个实验性学习项目，使用 Next.js + Tailwind CSS + Node.js + PostgreSQL + Vercel 技术栈，为后续更复杂项目打下基础。

**核心价值：**
- **技术学习实践：** 通过完整的项目实践掌握现代开发技术，这是最让 Travis 兴奋的部分
- **满足表达需求：** 提供一个完全可控的平台来分享思考、学习和生活
- **建立个人品牌：** 建立独立的个人平台，展示个人思考和学习过程

**目标用户：**
- 亲人、朋友、同学：了解 Travis 的当前状态和动态
- 志趣相投的同行：获取有用资讯、学习思考过程，产生共鸣并互动

### What Makes This Special

**产品的独特价值：**
- **这是 Travis 自己的博客：** 不需要和他人比较，完全按照个人需求定制
- **学习过程的展示：** 读者可以看到 Travis 的技术学习历程和思考过程
- **共鸣与互动：** 希望读者能够产生共鸣，并通过留言、悄悄话等方式进行互动
- **完全可控：** 从技术栈到功能设计，完全由 Travis 掌控

**产品的"魔法"时刻：**
- 读者阅读文章时，能够感受到 Travis 的真实思考和学习过程
- 读者通过留言和互动，与 Travis 产生共鸣和连接
- Travis 通过这个项目，完成从学习到实践的完整技术成长历程

---

## Project Classification

**Technical Type:** Web Application  
**Domain:** General  
**Complexity:** Low

**技术栈：**
- **前端：** Next.js (App Router) + Tailwind CSS + 组件库（shadcn/ui 或 Headless UI）
- **架构模式：** Server Components + Server Actions
- **后端：** Node.js
- **数据库：** PostgreSQL
- **ORM：** Prisma
- **部署：** Vercel
- **存储：** 本地存储（抽象层设计）
- **认证：** NextAuth.js (OAuth + JWT)
- **编辑器：** @uiw/react-md-editor (Markdown Editor)
- **Markdown 渲染：** markdown-it + @tailwindcss/typography (自定义实现)
- **语法高亮：** Shiki

**项目类型：** 个人博客平台 + 实验性学习项目

---

## Success Criteria

### 核心成功指标

**1. 技术学习目标**
- **掌握 Vibe 开发技术栈：** 通过完整的项目实践，掌握 Next.js + Tailwind CSS + Node.js + PostgreSQL + Vercel 等现代开发技术
- **完成开发流程：** 从规划到实现，完成完整的开发流程
- **技术能力提升：** 能够读懂代码，逐步学习新技术栈，为后续更复杂项目打基础

**2. 读者互动**
- **读者反馈：** 有读者给出反馈（留言、分享等），数量不限
- **互动方式：** 留言、分享都是期待的互动方式
- **共鸣与连接：** 读者能够产生共鸣，与 Travis 产生连接

**3. 内容发布**
- **发布频率：** 每周发布 2-3 篇文章（目标）
- **持续运营：** 博客成功上线并持续运营一段时间
- **内容质量：** 分享思考和学习过程，提供有用资讯

**4. 项目价值**
- **情绪价值：** 通过这个项目带来情绪价值
- **个人品牌：** 建立独立的个人平台
- **表达需求：** 满足表达欲，分享思考和学习过程

### 成功标准总结

**技术层面：**
- ✅ 掌握 Vibe 开发技术栈
- ✅ 完成完整的开发流程
- ✅ 项目成功上线并运行

**内容层面：**
- ✅ 每周发布 2-3 篇文章（目标）
- ✅ 有读者反馈和互动
- ✅ 持续运营一段时间

**个人层面：**
- ✅ 带来情绪价值
- ✅ 满足表达需求
- ✅ 建立个人品牌

**成功不依赖于：**
- ❌ 读者数量（多少都可以）
- ❌ 与其他博客的比较（这是自己的博客）

---

## Product Scope

### MVP - Minimum Viable Product

**核心功能（必须）：**

**1. 写文章和发布**
- 后台文章编辑器（Markdown Editor）
- 文章创建、编辑、删除
- 草稿功能
- 发布状态管理

**2. 展示文章列表和详情**
- 首页：最新文章列表
- 文章详情页
- 按时间排序
- 分页功能

**3. 基本的用户系统**
- 用户注册（邮箱 + OAuth）
- 用户登录（OAuth + JWT）
- 用户角色（普通用户、管理员/博主）
- 博主权限控制（后台编辑）

**4. 响应式设计**
- 桌面端适配
- 平板适配
- 手机端适配
- 良好的阅读体验

**重要功能（建议包含）：**

**1. 文章分类和标签**
- 文章分类（技术、生活、旅行）
- 标签系统
- 按分类和标签筛选

**2. 留言系统** ⏸️ **暂时禁用**
- ⚠️ **当前状态：** 留言功能已暂时禁用（代码保留但 UI 未显示）
- ⚠️ **原因：** 调查 Vercel 部署问题时暂时移除
- ⚠️ **恢复计划：** 待核心功能稳定后恢复
- 读者留言功能（代码已实现，待启用）
- 留言回复（代码已实现，待启用）
- 留言删除（博主权限）（代码已实现，待启用）
- **详细说明：** 参见 `docs/epic5-comment-feature-status.md`

**3. 基础的 SEO 优化**
- 元标签
- Sitemap
- 结构化数据
- Open Graph

**MVP 成功标准：**
- ✅ 核心功能全部实现
- ✅ 重要功能全部实现
- ✅ 响应式设计完成
- ✅ 基础 SEO 优化完成
- ✅ 可以正常发布和展示文章
- ⏸️ 读者可以留言互动（暂时禁用，代码已实现）

### Growth Features (Post-MVP)

**1. 国际化**
- 多语言内容支持（中文、英文、法语）
- UI 语言切换
- 自动翻译（开源模型）
- 多语言内容存储（方案 A：不同语言版本作为不同记录）

**2. 悄悄话功能**
- 私密讨论功能
- 只有博主可以看到的悄悄话
- 博主对悄悄话的回复只有对方可以看到

### Vision (Future)

**1. AI 辅助写作**
- AI 辅助功能集成
- 帮助提升写作效率和质量

**2. 流媒体支持**
- 视频上传和播放
- 音频上传和播放
- 富媒体内容支持

**3. 高级分析功能**
- 详细的访问统计
- 用户行为分析
- 热门文章分析

---

## Functional Requirements

### 1. 用户管理能力

**FR-1.1 用户注册**
- **描述：** 用户可以通过邮箱或第三方登录（GitHub、Google）注册账号
- **接受标准：**
  - 支持邮箱注册（邮箱验证）
  - 支持 OAuth 登录（GitHub、Google）
  - 注册成功后自动登录
  - 用户信息存储到数据库

**FR-1.2 用户登录**
- **描述：** 用户可以通过邮箱密码或第三方登录方式登录
- **接受标准：**
  - 支持邮箱密码登录
  - 支持 OAuth 登录
  - 使用 JWT 进行认证
  - 登录状态持久化

**FR-1.3 用户角色管理**
- **描述：** 系统支持普通用户和管理员（博主）两种角色
- **接受标准：**
  - 普通用户：可以注册、登录、留言
  - 管理员（博主）：可以注册、登录、留言、编辑文章、管理后台
  - 角色权限控制正确

**FR-1.4 用户资料管理**
- **描述：** 用户可以管理个人资料（头像、简介等）
- **接受标准：**
  - 用户可以编辑个人资料
  - 支持头像上传
  - 支持简介编辑

### 2. 内容管理能力

**FR-2.1 文章创建**
- **描述：** 博主可以在后台创建新文章
- **接受标准：**
  - 使用 Markdown 编辑器
  - 支持 Markdown 格式
  - 支持富文本编辑
  - 支持实时预览
  - 文章保存到数据库

**FR-2.2 文章编辑**
- **描述：** 博主可以编辑已存在的文章
- **接受标准：**
  - 可以编辑文章标题、内容、分类、标签
  - 编辑后保存更新
  - 支持版本历史（可选）

**FR-2.3 文章发布**
- **描述：** 博主可以发布文章，使其在前台可见
- **接受标准：**
  - 文章有发布状态（草稿/已发布）
  - 点击发布按钮后文章在前台可见
  - 可以取消发布（撤回）

**FR-2.4 文章删除**
- **描述：** 博主可以删除文章
- **接受标准：**
  - 删除前需要确认
  - 删除后文章从数据库移除
  - 前台不再显示

**FR-2.5 草稿管理**
- **描述：** 博主可以保存文章为草稿
- **接受标准：**
  - 文章可以保存为草稿
  - 草稿不会在前台显示
  - 可以继续编辑草稿

**FR-2.6 文章分类管理**
- **描述：** 文章可以分类（技术、生活、旅行）
- **接受标准：**
  - 文章可以分配到一个分类
  - 可以按分类筛选文章
  - 分类在前台显示

**FR-2.7 文章标签管理**
- **描述：** 文章可以添加标签
- **接受标准：**
  - 文章可以添加多个标签
  - 可以按标签筛选文章
  - 标签在前台显示

### 3. 内容展示能力

**FR-3.1 文章列表展示**
- **描述：** 前台首页显示最新文章列表
- **接受标准：**
  - 显示文章标题、摘要、发布时间
  - 按时间倒序排列（最新在顶部或底部，根据用户选择）
  - 支持分页
  - 响应式设计（桌面、平板、手机）

**FR-3.2 文章详情展示**
- **描述：** 用户可以查看完整文章内容
- **接受标准：**
  - 显示完整文章内容
  - 显示文章分类、标签
  - 显示发布时间
  - 良好的阅读体验（排版、字体、配色）
  - 响应式设计

**FR-3.3 分类筛选**
- **描述：** 用户可以按分类筛选文章
- **接受标准：**
  - 可以点击分类查看该分类下的所有文章
  - 筛选结果正确显示

**FR-3.4 标签筛选**
- **描述：** 用户可以按标签筛选文章
- **接受标准：**
  - 可以点击标签查看该标签下的所有文章
  - 筛选结果正确显示

**FR-3.5 分页功能**
- **描述：** 文章列表支持分页
- **接受标准：**
  - 每页显示合理数量的文章
  - 支持翻页
  - 显示当前页码和总页数

### 4. 互动能力 ⏸️ **暂时禁用**

**当前状态：** 留言功能已暂时禁用，代码已实现但 UI 未显示。详细说明参见 `docs/epic5-comment-feature-status.md`。

**FR-4.1 留言功能** ⏸️ **暂时禁用**
- **描述：** 读者可以在文章下方留言
- **当前状态：** 代码已实现，但功能暂时禁用
- **接受标准：**
  - 读者可以发表留言（待启用）
  - 留言显示在文章下方（待启用）
  - 留言包含作者、内容、时间（已实现）
  - 支持未登录用户留言（已实现）

**FR-4.2 留言回复** ⏸️ **暂时禁用**
- **描述：** 博主和读者可以回复留言
- **当前状态：** 代码已实现，但功能暂时禁用
- **接受标准：**
  - 可以回复其他用户的留言（待启用）
  - 回复显示在留言下方（待启用）
  - 支持多级回复（已实现）

**FR-4.3 留言管理** ⏸️ **暂时禁用**
- **描述：** 博主可以管理留言
- **当前状态：** 代码已实现，但功能暂时禁用
- **接受标准：**
  - 博主可以删除留言（待启用）
  - 博主可以回复留言（待启用）
  - 留言管理在后台进行（已实现）

### 5. 内容创作能力

**FR-5.1 Markdown 编辑器**
- **描述：** 博主使用 Markdown 编辑器创建和编辑文章
- **接受标准：**
  - Markdown 编辑器正常工作（@uiw/react-md-editor）
  - 原生 Markdown 语法支持
  - 支持实时预览
  - 支持常用格式（粗体、斜体、链接、列表、代码块等）
  - HTML ↔ Markdown 双向转换

**FR-5.2 图片上传**
- **描述：** 博主可以在文章中插入图片
- **接受标准：**
  - 支持图片上传（拖拽、粘贴）
  - 图片存储到本地（抽象层设计）
  - 图片在文章中正确显示
  - 支持图片管理（媒体库）

**FR-5.3 媒体管理**
- **描述：** 博主可以管理上传的媒体文件
- **接受标准：**
  - 可以查看已上传的媒体文件
  - 可以删除媒体文件
  - 媒体库界面友好

### 6. 后台管理能力

**FR-6.1 后台管理界面**
- **描述：** 博主可以访问后台管理界面
- **接受标准：**
  - 后台需要登录认证
  - 只有博主可以访问后台
  - 后台界面清晰易用

**FR-6.2 文章管理**
- **描述：** 博主可以在后台管理所有文章
- **接受标准：**
  - 可以查看所有文章列表
  - 可以创建、编辑、删除文章
  - 可以管理文章状态（草稿/已发布）

### 7. SEO 优化能力

**FR-7.1 元标签**
- **描述：** 文章页面包含正确的 SEO 元标签
- **接受标准：**
  - 每篇文章有独立的 title、description
  - 支持 Open Graph 标签
  - 支持 Twitter Card 标签

**FR-7.2 Sitemap**
- **描述：** 网站生成 sitemap.xml
- **接受标准：**
  - 自动生成 sitemap.xml
  - 包含所有已发布文章
  - 符合搜索引擎标准

**FR-7.3 结构化数据**
- **描述：** 文章页面包含结构化数据
- **接受标准：**
  - 使用 JSON-LD 格式
  - 包含文章信息（标题、作者、发布时间等）
  - 符合 Schema.org 标准

---

## Non-Functional Requirements

### Performance（性能 - 高优先级）

**NFR-1.1 页面加载性能**
- **要求：** 页面首次加载时间 < 3 秒（行业平均标准）
- **指标：**
  - 首屏渲染时间（FCP）< 1.8 秒
  - 最大内容绘制时间（LCP）< 2.5 秒
  - 首次输入延迟（FID）< 100 毫秒
- **实现方式：**
  - 代码分割和懒加载
  - 图片优化和懒加载
  - CDN 加速（如需要）
  - 服务端渲染（SSR）优化

**NFR-1.2 响应式设计性能**
- **要求：** 在不同设备上保持良好的性能
- **指标：**
  - 移动端页面加载时间 < 4 秒
  - 平板端页面加载时间 < 3.5 秒
  - 桌面端页面加载时间 < 3 秒
- **实现方式：**
  - 响应式图片
  - 移动端优化
  - 触摸交互优化

**NFR-1.3 图片加载优化**
- **要求：** 图片加载不影响页面性能
- **指标：**
  - 图片懒加载
  - 图片格式优化（WebP、AVIF）
  - 图片压缩
- **实现方式：**
  - 使用 Next.js Image 组件
  - 图片 CDN（如需要）
  - 图片压缩工具

### Security（安全性 - 高优先级）

**NFR-2.1 用户认证和授权**
- **要求：** 安全的用户认证和授权机制
- **标准：**
  - 使用 OAuth 2.0 标准
  - JWT token 安全存储（httpOnly cookie）
  - Token 过期和刷新机制
  - 密码加密存储（bcrypt）
- **实现方式：**
  - OAuth + JWT 认证
  - 安全的 session 管理
  - 密码加密

**NFR-2.2 数据保护**
- **要求：** 保护用户数据和内容安全
- **标准：**
  - HTTPS 加密传输
  - 数据库连接加密
  - 敏感数据加密存储
  - SQL 注入防护
  - XSS 攻击防护
- **实现方式：**
  - 使用 HTTPS
  - 参数化查询
  - 输入验证和清理
  - Content Security Policy (CSP)

**NFR-2.3 防攻击措施**
- **要求：** 防止常见网络攻击
- **标准：**
  - CSRF 防护
  - 速率限制（Rate Limiting）
  - DDoS 防护（基础）
  - 输入验证
- **实现方式：**
  - CSRF token
  - API 速率限制
  - 输入验证中间件
  - 安全头部设置

### Scalability（可扩展性 - 中优先级）

**NFR-3.1 功能扩展性**
- **要求：** 系统架构支持未来功能扩展
- **标准：**
  - 模块化设计
  - 抽象层设计（存储、认证等）
  - 插件化架构（如需要）
- **实现方式：**
  - 存储抽象层（便于迁移到云存储）
  - 认证抽象层
  - 功能模块化

**NFR-3.2 数据扩展性**
- **要求：** 支持数据增长
- **标准：**
  - 数据库索引优化
  - 分页查询优化
  - 数据归档机制（如需要）
- **实现方式：**
  - PostgreSQL 索引优化
  - 分页查询
  - 数据清理机制

### Accessibility（可访问性 - 中优先级）

**NFR-4.1 响应式设计**
- **要求：** 在不同设备上都能正常使用
- **标准：**
  - 桌面端（1920x1080 及以上）
  - 平板端（768px - 1024px）
  - 手机端（320px - 767px）
- **实现方式：**
  - Tailwind CSS 响应式设计
  - 移动端优先设计
  - 触摸友好交互

**NFR-4.2 无障碍访问（基础）**
- **要求：** 基本的无障碍访问支持
- **标准：**
  - 语义化 HTML
  - 键盘导航支持
  - 基本的 ARIA 标签
  - 颜色对比度符合 WCAG AA 标准
- **实现方式：**
  - 语义化 HTML 标签
  - 键盘导航
  - ARIA 属性
  - 颜色对比度检查

---

## User Experience Principles

### 视觉个性

**设计风格：**
- **科技感：** 现代、简洁的科技风格
- **浅色主题：** 以浅色为主，低冲击力
- **简洁清晰：** 避免过度设计，注重内容展示
- **流行设计：** 采用当前流行的设计方式

**设计工具：**
- Tailwind CSS：快速开发现代化 UI
- 组件库：shadcn/ui 或 Headless UI

### 关键交互模式

**1. 阅读体验**
- **文章列表：** 清晰的文章卡片，显示标题、摘要、发布时间
- **文章详情：** 良好的排版，易读的字体，舒适的配色
- **导航：** 简单直观的导航菜单

**2. 内容创作**
- **编辑器：** Markdown 编辑器（@uiw/react-md-editor），支持实时预览和原生 Markdown 语法
- **媒体上传：** 拖拽、粘贴上传图片
- **发布流程：** 简单的发布按钮，清晰的状态提示
- **Markdown 渲染：** 增强的 Markdown 渲染样式和代码语法高亮（Shiki）

**3. 互动体验**
- **留言：** 简单的留言表单，清晰的留言展示
- **回复：** 直观的回复功能
- **分享：** 社交媒体分享按钮

### 用户体验目标

**核心体验：**
- **阅读舒适：** 读者能够舒适地阅读文章
- **操作简单：** 所有操作都简单直观
- **响应迅速：** 页面响应迅速，交互流畅
- **多设备适配：** 在电脑、手机、平板上都有良好的体验

**情感连接：**
- **共鸣：** 通过内容展示 Travis 的真实思考和学习过程
- **互动：** 读者能够轻松留言和互动
- **连接：** 读者与 Travis 产生情感连接

---

## Implementation Planning

### Epic Breakdown Required

Requirements must be decomposed into epics and bite-sized stories (200k context limit).

**Next Step:** Run `workflow create-epics-and-stories` to create the implementation breakdown.

---

## References

- **Product Brief:** `docs/product-brief-travis-blog-2025-11-12.md`
- **Brainstorming Results:** `docs/bmm-brainstorming-session-2025-11-12.md`

---

## Next Steps

1. **Epic & Story Breakdown** - Run: `workflow create-epics-and-stories`
2. **UX Design** (if UI) - Run: `workflow create-design`
3. **Architecture** - Run: `workflow create-architecture`

---

_This PRD captures the essence of travis-blog - 展示 Travis 个人的思考和学习过程，读者能够产生共鸣并互动，Travis 通过这个项目完成从学习到实践的完整技术成长历程_

_Created through collaborative discovery between Travis and AI facilitator._

