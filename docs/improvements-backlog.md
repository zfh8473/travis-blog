# 改进待办清单 (Improvements Backlog)

本文档记录项目中待实施的改进建议，供后续迭代考虑。

**最后更新**: 2025-11-15

---

## 📋 改进项分类

### 🔴 高优先级 (High Priority)

当前无高优先级改进项。

---

### 🟡 中优先级 (Medium Priority)

#### IMP-001: 文章管理列表 - 服务端搜索支持
- **来源**: Epic 6 回顾 (Story 6.2)
- **描述**: 如果文章数量可能超过 1000，考虑添加服务端搜索支持或单独的统计 API
- **当前实现**: 使用客户端筛选和搜索，加载最多 1000 篇文章 (`limit=1000`)
- **问题**: 
  - 如果文章数量超过 1000，统计信息可能不准确
  - 客户端筛选在大数据量时性能可能下降
- **建议方案**:
  1. 添加服务端搜索支持（修改 `/api/articles` 端点支持 `search` 参数）
  2. 或者创建单独的统计 API 端点 (`/api/articles/stats`)
  3. 或者实现真正的分页（但会失去客户端筛选的优势）
- **预计工作量**: 4-8 小时
- **相关文件**: 
  - `app/admin/articles/page.tsx:174` - 当前使用 `limit=1000`
  - `app/api/articles/route.ts` - 需要修改 API 端点
- **状态**: 待实施（当前实现满足 MVP 需求）
- **触发条件**: 当文章数量接近或超过 1000 时考虑实施

---

### 🟢 低优先级 (Low Priority)

#### IMP-002: E2E 测试 - Markdown 编辑器交互验证
- **来源**: Epic 6 回顾 (Story 6.3)
- **描述**: 验证并调整 E2E 测试中 Markdown 编辑器的交互方式（如果需要）
- **当前实现**: E2E 测试使用 `editor.fill()` 来填充 Markdown 编辑器
- **问题**: Markdown 编辑器（@uiw/react-md-editor）可能需要更具体的交互方式
- **建议方案**:
  1. 实际运行 E2E 测试验证当前实现是否工作
  2. 如果测试失败，使用更具体的交互方式（例如点击编辑器，然后输入文本）
  3. 参考 @uiw/react-md-editor 官方文档的测试建议
- **预计工作量**: 2-4 小时
- **相关文件**: 
  - `tests/e2e/admin-article-integration.spec.ts:148` - Markdown 编辑器交互
- **状态**: 待验证（需要实际运行测试）
- **触发条件**: 当 E2E 测试失败或需要改进测试可靠性时

#### IMP-003: 代码注释和文档的准确性
- **来源**: Epic 6 回顾 (Story 6.2)
- **描述**: 确保代码注释准确反映实现，特别是在实现方式改变时
- **问题**: 代码审查中发现注释不准确的情况（已修复，但需要持续改进）
- **建议方案**:
  1. 在代码审查时特别注意注释的准确性
  2. 当实现方式改变时，及时更新相关注释
  3. 使用 JSDoc 注释标准确保文档一致性
- **预计工作量**: 持续改进
- **状态**: 持续改进中

#### IMP-004: 接受标准的用户体验考虑
- **来源**: Epic 6 回顾
- **描述**: 在实现时不仅要满足接受标准，还要考虑用户体验
- **问题**: 接受标准中的"or"选项需要仔细考虑用户体验
- **建议方案**:
  1. 在实现时评估不同选项的用户体验影响
  2. 选择对用户最友好的实现方式
  3. 如果接受标准不够明确，与产品负责人讨论
- **预计工作量**: 持续改进
- **状态**: 持续改进中

#### IMP-005: Next.js Middleware 弃用警告
- **来源**: Vercel 构建警告 (2025-11-15)
- **描述**: Next.js 16 中 `middleware` 文件约定已弃用，建议使用 `proxy` 代替
- **当前实现**: 使用 `middleware.ts` 文件进行路由保护
- **问题**: 
  - 构建时显示警告：`The "middleware" file convention is deprecated. Please use "proxy" instead.`
  - 虽然不影响功能，但未来版本可能会移除支持
- **建议方案**:
  1. 关注 Next.js 官方文档关于 `proxy` 的迁移指南
  2. 在 Next.js 提供明确的迁移路径后，将 `middleware.ts` 迁移到新的 `proxy` 约定
  3. 确保迁移后功能保持一致（JWT 认证、路由保护等）
- **预计工作量**: 2-4 小时（需要测试）
- **相关文件**: 
  - `middleware.ts` - 当前 middleware 实现
- **状态**: 待迁移（当前功能正常，等待 Next.js 官方迁移指南）
- **触发条件**: Next.js 官方提供明确的迁移指南或强制要求时

---

## 📊 改进项统计

- **总计**: 5 项
- **高优先级**: 0 项
- **中优先级**: 1 项
- **低优先级**: 4 项
- **已完成**: 0 项（已完成的改进已从待办清单中移除）

---

## 🔄 改进项生命周期

1. **发现**: 通过代码审查、回顾会议、用户反馈等方式发现改进点
2. **记录**: 记录到本文档，包括优先级、描述、建议方案等
3. **评估**: 定期评估改进项的优先级和必要性
4. **实施**: 在合适的时机实施改进
5. **完成**: 实施完成后，从待办清单中移除或标记为已完成

---

## 📝 添加新改进项

当发现新的改进点时，请按照以下格式添加到本文档：

```markdown
#### IMP-XXX: [改进项标题]
- **来源**: [来源，如 Epic X 回顾、代码审查等]
- **描述**: [详细描述改进项]
- **当前实现**: [当前实现方式]
- **问题**: [存在的问题或限制]
- **建议方案**: [建议的解决方案]
- **预计工作量**: [X-Y 小时]
- **相关文件**: [相关文件路径]
- **状态**: [待实施/进行中/已完成]
- **触发条件**: [何时考虑实施]
```

---

## 🔗 相关文档

- [Epic 6 回顾报告](../.bmad-ephemeral/retrospectives/epic-6-retro-2025-11-15.md)
- [架构文档](./architecture.md)
- [Epic 文档](./epics.md)

---

_本文档会随着项目进展持续更新。_

