# Epic 1-6 全面回归测试计划

**创建日期：** 2025-01-XX  
**负责人：** PM  
**状态：** 📋 计划中  
**测试范围：** Epic 1-6 所有功能

---

## 📋 测试背景

### 为什么需要全面回归测试？

1. **文档全面更新**
   - PRD 和所有 Epic 文档已更新
   - 技术栈变更已记录（Tiptap → MarkdownEditor）
   - 架构模式变更已记录（Server Components + Server Actions）
   - 需要验证文档与实际实现的一致性

2. **架构变更影响**
   - Server Components 和 Server Actions 的引入可能影响多个 Epic
   - 会话管理方式的改变可能影响认证相关功能
   - 需要验证所有受影响的 Epic 仍然正常工作

3. **测试覆盖缺口**
   - 之前只对 Epic 3 & 4 进行了部分回归测试（55% 完成）
   - Epic 1、2、5、6 没有进行系统性的回归测试
   - 需要确保所有 Epic 的功能完整性

---

## 🎯 测试目标

1. **验证功能完整性**
   - 确保所有 Epic 1-6 的核心功能正常工作
   - 验证文档描述与实际实现一致

2. **验证架构变更影响**
   - 确认 Server Components 和 Server Actions 的引入没有破坏现有功能
   - 验证会话管理改进对所有 Epic 的影响

3. **发现潜在问题**
   - 识别文档更新后可能暴露的问题
   - 发现架构变更可能引入的回归问题

---

## 📊 测试范围

### Epic 1: 项目基础架构（Foundation）

**测试重点：**
- ✅ 项目初始化和配置
- ✅ 数据库连接和 ORM 配置
- ✅ 部署配置（Vercel）
- ✅ 存储抽象层

**测试用例：**
- [ ] TC-1.1: 项目启动和运行
- [ ] TC-1.2: 数据库连接测试
- [ ] TC-1.3: Prisma 操作测试
- [ ] TC-1.4: Vercel 部署验证
- [ ] TC-1.5: 存储抽象层功能测试

**优先级：** 🟡 中（基础功能，通常稳定）

---

### Epic 2: 用户认证和授权

**测试重点：**
- ✅ 用户注册（邮箱）
- ✅ OAuth 登录（GitHub、Google）
- ✅ 邮箱密码登录
- ✅ JWT 认证中间件
- ✅ 角色和权限管理
- ✅ 用户资料管理

**测试用例：**
- [ ] TC-2.1: 邮箱注册功能
- [ ] TC-2.2: GitHub OAuth 登录
- [ ] TC-2.3: Google OAuth 登录
- [ ] TC-2.4: 邮箱密码登录
- [ ] TC-2.5: JWT 认证验证
- [ ] TC-2.6: 角色权限检查（admin vs user）
- [ ] TC-2.7: 用户资料管理
- [ ] TC-2.8: 会话持久性测试

**优先级：** 🔴 高（核心功能，受架构变更影响）

---

### Epic 3: 内容创作和管理

**测试重点：**
- ✅ Markdown 编辑器功能
- ✅ 文章创建/编辑/删除
- ✅ 分类和标签管理
- ✅ 媒体管理
- ✅ Server Actions 集成

**测试用例：**
- [ ] TC-3.1: Markdown 编辑器加载 ✅（已完成）
- [ ] TC-3.2: Markdown 语法输入 ✅（已完成）
- [ ] TC-3.3: HTML 内容加载 ✅（已完成）
- [ ] TC-3.4: Markdown 内容保存 ✅（已完成）
- [ ] TC-3.5: 图片拖拽上传 ⏳（待手动测试）
- [ ] TC-3.6: 图片粘贴上传 ⏳（待手动测试）
- [ ] TC-3.7: 文章创建（完整流程）
- [ ] TC-3.8: 文章编辑（完整流程）
- [ ] TC-3.9: 文章删除
- [ ] TC-3.10: 分类管理
- [ ] TC-3.11: 标签管理
- [ ] TC-3.12: 媒体管理功能

**优先级：** 🔴 高（核心功能，已部分测试）

---

### Epic 4: 内容展示

**测试重点：**
- ✅ 文章列表页面
- ✅ 文章详情页面
- ✅ 分类筛选
- ✅ 标签筛选
- ✅ 分页功能
- ✅ Markdown 渲染和语法高亮

**测试用例：**
- [ ] TC-4.1: 文章列表加载 ✅（已完成）
- [ ] TC-4.2: 文章详情显示 ✅（已完成）
- [ ] TC-4.3: HTML 内容渲染 ✅（已完成）
- [ ] TC-4.4: Markdown 转换渲染 ✅（已完成）
- [ ] TC-4.5: 分类筛选功能
- [ ] TC-4.6: 标签筛选功能
- [ ] TC-4.7: 分页功能
- [ ] TC-4.8: 代码语法高亮显示
- [ ] TC-4.9: 响应式设计验证

**优先级：** 🔴 高（核心功能，已部分测试）

---

### Epic 5: 读者互动 ⏸️ **功能暂时禁用**

**当前状态：** ⏸️ 留言功能已暂时禁用（代码保留但 UI 未显示）

**测试重点：**
- ⏸️ 留言功能（暂时禁用，跳过测试）
- ⏸️ 留言回复功能（暂时禁用，跳过测试）
- ⏸️ 留言管理功能（暂时禁用，跳过测试）

**测试用例：**
- [ ] ~~TC-5.1: 匿名用户留言~~ ⏸️ 跳过（功能禁用）
- [ ] ~~TC-5.2: 登录用户留言~~ ⏸️ 跳过（功能禁用）
- [ ] ~~TC-5.3: 留言回复功能~~ ⏸️ 跳过（功能禁用）
- [ ] ~~TC-5.4: 嵌套回复显示~~ ⏸️ 跳过（功能禁用）
- [ ] ~~TC-5.5: 博主删除留言~~ ⏸️ 跳过（功能禁用）
- [ ] ~~TC-5.6: 留言审核（如已实现）~~ ⏸️ 跳过（功能禁用）

**优先级：** ⏸️ 暂时跳过（功能禁用）

**说明：**
- 留言功能代码已实现，但在调查 Vercel 问题时暂时禁用
- 详细说明参见 `docs/epic5-comment-feature-status.md`
- 待功能恢复后，再执行完整的回归测试

---

### Epic 6: 后台管理界面

**测试重点：**
- ✅ 后台管理界面基础结构
- ✅ 文章管理列表
- ✅ 后台文章编辑集成
- ✅ Server Components 数据获取

**测试用例：**
- [ ] TC-6.1: 后台管理界面访问
- [ ] TC-6.2: 权限检查（admin only）
- [ ] TC-6.3: 文章管理列表显示
- [ ] TC-6.4: 文章状态筛选
- [ ] TC-6.5: 文章搜索功能
- [ ] TC-6.6: 文章删除功能
- [ ] TC-6.7: 后台文章创建集成
- [ ] TC-6.8: 后台文章编辑集成
- [ ] TC-6.9: 导航菜单功能

**优先级：** 🔴 高（受 Server Components 重构影响）

---

## 📈 测试统计

| Epic | 测试用例数 | 已完成 | 待执行 | 优先级 |
|------|-----------|--------|--------|--------|
| Epic 1 | 5 | 0 | 5 | 🟡 中 |
| Epic 2 | 8 | 0 | 8 | 🔴 高 |
| Epic 3 | 12 | 4 | 8 | 🔴 高 |
| Epic 4 | 9 | 4 | 5 | 🔴 高 |
| Epic 5 | 6 | 0 | 0 | ⏸️ 跳过（功能禁用） |
| Epic 6 | 9 | 0 | 9 | 🔴 高 |
| **总计** | **49** | **8** | **35** | - |

---

## 🎯 测试策略

### 优先级策略

**第一阶段：高优先级 Epic（Epic 2, 3, 4, 6）**
- 这些 Epic 受架构变更影响最大
- 核心功能，用户使用频率高
- 预计时间：2-3 天

**第二阶段：中优先级 Epic（Epic 1, 5）**
- 基础功能，通常较稳定
- 受架构变更影响较小
- 预计时间：1 天

### 测试方法

1. **功能测试**
   - 手动测试所有核心功能
   - 验证接受标准（Acceptance Criteria）
   - 检查错误处理

2. **集成测试**
   - 测试 Epic 之间的集成
   - 验证数据流
   - 检查 API 调用

3. **兼容性测试**
   - 验证现有数据兼容性
   - 测试数据迁移（如需要）
   - 检查向后兼容

---

## 📋 测试执行计划

### Week 1: 高优先级 Epic 测试

**Day 1-2: Epic 2 & 6（认证和管理）**
- 测试用户认证流程
- 测试后台管理功能
- 验证权限控制

**Day 3-4: Epic 3 & 4（内容管理）**
- 完成剩余的编辑器测试
- 测试文章创建/编辑/删除
- 测试前台展示功能

### Week 2: 中优先级 Epic 测试

**Day 5: Epic 1（基础架构）**
- 验证基础功能
- 检查部署配置

**Day 6: Epic 5（读者互动）**
- 测试留言功能
- 验证回复功能

**Day 7: 总结和报告**
- 整理测试结果
- 编写测试报告
- 制定修复计划

---

## ✅ 测试检查清单

### 通用检查项

- [ ] 功能正常工作
- [ ] 错误处理正确
- [ ] 用户体验良好
- [ ] 响应式设计正常
- [ ] 性能可接受
- [ ] 安全性检查通过

### 架构变更相关检查

- [ ] Server Components 正常工作
- [ ] Server Actions 正常工作
- [ ] 会话管理正常
- [ ] 数据获取正常
- [ ] 错误处理一致

---

## 🐛 问题跟踪

### 问题分类

- **P0 - 阻塞性问题**：功能完全无法使用
- **P1 - 严重问题**：功能部分可用，但有明显缺陷
- **P2 - 一般问题**：功能可用，但有改进空间
- **P3 - 轻微问题**：不影响使用，但可以优化

### 问题处理流程

1. 发现问题 → 记录到问题跟踪表
2. 评估优先级 → 决定是否立即修复
3. 修复问题 → 验证修复
4. 更新测试结果 → 继续测试

---

## 📊 测试环境

- **测试 URL：** `https://travis-blog.vercel.app`
- **管理员账号：** `zfh8473@gmail.com`
- **测试浏览器：** Chrome（最新版本）
- **测试设备：** 桌面、平板、移动设备

---

## 📝 测试报告

测试完成后将生成：
- 测试执行报告
- 问题跟踪报告
- 测试覆盖率报告
- 改进建议

---

## 🔗 相关文档

- [Epic 3 & 4 回归测试计划](./regression-test-plan-epic3-4.md)
- [Epic 3 & 4 回归测试状态](./regression-test-status-summary.md)
- [文档维护流程](./documentation-maintenance-process.md)

---

**最后更新：** 2025-01-XX  
**负责人：** PM  
**预计完成时间：** 2 周

