# Vercel 环境回归测试检查清单

**测试环境：** Vercel 生产环境  
**测试账号：** 管理员账号  
**测试日期：** 2025-01-XX

---

## ✅ 测试前准备

- [x] 本地代码检查完成
- [x] 本地单元测试通过（21/21）
- [x] 代码已提交到 GitHub（注释修复）
- [ ] 等待 Vercel 部署完成
- [ ] 确认 Vercel 部署成功

---

## 🧪 Vercel 功能测试

### 1. 编辑器基础功能（Vercel 环境）

#### 1.1 Markdown 编辑器加载
- [ ] 访问 `https://[your-domain]/admin/articles/new`
- [ ] 确认页面正常加载（无 404/500 错误）
- [ ] 确认 MarkdownEditor 组件正常渲染
- [ ] 确认编辑器界面显示正常（工具栏、编辑区域）
- [ ] 确认无控制台错误
- [ ] 确认加载提示正常显示

**预期结果：** 编辑器正常加载，界面完整

---

#### 1.2 Markdown 语法输入测试（关键测试）

**测试目的：** 验证之前报告的 `## 标题` 被删除和光标跳转问题已解决

- [ ] 在编辑器中输入 `# 一级标题`，确认：
  - [ ] `#` 字符不会被删除
  - [ ] 光标位置正常
  - [ ] 标题格式正确显示

- [ ] 在编辑器中输入 `## 二级标题`，确认：
  - [ ] `##` 字符不会被删除
  - [ ] 光标位置正常
  - [ ] 标题格式正确显示

- [ ] 在编辑器中输入 `### 三级标题`，确认：
  - [ ] `###` 字符不会被删除
  - [ ] 光标位置正常
  - [ ] 标题格式正确显示

- [ ] 测试其他 Markdown 语法：
  - [ ] `**粗体**` - 确认显示正常
  - [ ] `*斜体*` - 确认显示正常
  - [ ] `- 列表项` - 确认显示正常
  - [ ] `1. 有序列表` - 确认显示正常
  - [ ] 代码块 - 确认显示正常

**预期结果：** 所有 Markdown 语法输入正常，无字符删除或光标跳转问题

---

#### 1.3 HTML 内容加载（编辑现有文章）

**测试目的：** 验证现有文章的 HTML 内容能正确转换为 Markdown

- [ ] 访问 `/admin/articles`，选择一篇现有文章
- [ ] 点击"编辑"按钮
- [ ] 确认编辑页面正常加载
- [ ] 确认编辑器中的内容正确显示（从 HTML 转换为 Markdown）
- [ ] 确认内容完整，无数据丢失
- [ ] 确认格式正确（标题、段落、列表等）

**测试多篇文章：**
- [ ] 测试文章 1（简单内容）
- [ ] 测试文章 2（包含图片）
- [ ] 测试文章 3（包含列表）
- [ ] 测试文章 4（包含代码块）
- [ ] 测试文章 5（复杂格式）

**预期结果：** 所有现有文章都能正确加载，HTML 内容正确转换为 Markdown

---

#### 1.4 Markdown 内容保存

- [ ] 在编辑器中输入 Markdown 内容
- [ ] 填写文章标题
- [ ] 点击"保存为草稿"按钮
- [ ] 确认保存成功（显示成功消息）
- [ ] 确认页面跳转到文章列表
- [ ] 重新打开刚创建的文章
- [ ] 确认内容正确保存
- [ ] 确认前台显示正确

**预期结果：** 内容保存成功，前台渲染正确

---

### 2. 图片上传功能（Vercel 环境）

#### 2.1 图片拖拽上传

- [ ] 准备一张测试图片（JPG/PNG）
- [ ] 将图片拖拽到编辑器区域
- [ ] 确认上传进度提示显示
- [ ] 确认图片上传成功
- [ ] 确认 Markdown 中插入图片语法：`![filename](url)`
- [ ] 确认图片 URL 正确（可访问）
- [ ] 确认无错误提示

**预期结果：** 图片拖拽上传成功，Markdown 语法正确插入

---

#### 2.2 图片粘贴上传

- [ ] 复制一张图片到剪贴板（从文件管理器或浏览器）
- [ ] 在编辑器中按 `Ctrl+V` / `Cmd+V`
- [ ] 确认上传进度提示显示
- [ ] 确认图片上传成功
- [ ] 确认 Markdown 中插入图片语法
- [ ] 确认图片 URL 正确

**预期结果：** 图片粘贴上传成功，Markdown 语法正确插入

---

#### 2.3 图片显示验证

- [ ] 保存包含图片的文章
- [ ] 访问文章详情页 `/articles/[slug]`
- [ ] 确认图片正确显示
- [ ] 确认图片 URL 可访问
- [ ] 确认图片大小和格式正确
- [ ] 确认图片 alt 文本正确（如果有）

**预期结果：** 图片在前台正确显示

---

### 3. 内容渲染验证（Vercel 环境）

#### 3.1 HTML 内容渲染（前台）

- [ ] 创建一篇包含各种 Markdown 语法的测试文章：
  - [ ] 一级标题 `#`
  - [ ] 二级标题 `##`
  - [ ] 三级标题 `###`
  - [ ] 粗体 `**text**`
  - [ ] 斜体 `*text*`
  - [ ] 无序列表 `- item`
  - [ ] 有序列表 `1. item`
  - [ ] 代码块 ` ```code``` `
  - [ ] 图片 `![alt](url)`
  - [ ] 链接 `[text](url)`

- [ ] 发布文章
- [ ] 访问文章详情页 `/articles/[slug]`
- [ ] 确认所有格式正确渲染：
  - [ ] 标题样式正确
  - [ ] 段落间距正确
  - [ ] 列表格式正确
  - [ ] 代码块样式正确
  - [ ] 图片显示正确
  - [ ] 链接可点击

**预期结果：** 所有 Markdown 格式在前台正确渲染为 HTML

---

#### 3.2 Markdown 转换后的 HTML 渲染

- [ ] 编辑一篇现有文章（包含 HTML 内容）
- [ ] 确认编辑器正确显示 Markdown 格式
- [ ] 保存文章
- [ ] 访问前台文章详情页
- [ ] 确认内容渲染正确
- [ ] 确认格式没有丢失
- [ ] 确认无 HTML 标签泄露

**预期结果：** 转换后的内容在前台正确渲染

---

### 4. 数据兼容性（Vercel 环境）

#### 4.1 现有文章加载

**测试多篇不同格式的文章：**

- [ ] 文章 1：简单文本
  - [ ] 编辑页面正常加载
  - [ ] 内容正确显示
  - [ ] 无错误提示

- [ ] 文章 2：包含图片
  - [ ] 编辑页面正常加载
  - [ ] 图片 Markdown 语法正确显示
  - [ ] 无错误提示

- [ ] 文章 3：包含列表
  - [ ] 编辑页面正常加载
  - [ ] 列表格式正确显示
  - [ ] 无错误提示

- [ ] 文章 4：包含代码块
  - [ ] 编辑页面正常加载
  - [ ] 代码块格式正确显示
  - [ ] 无错误提示

- [ ] 文章 5：复杂格式（混合多种元素）
  - [ ] 编辑页面正常加载
  - [ ] 所有格式正确显示
  - [ ] 无错误提示

**预期结果：** 所有现有文章都能正常加载和编辑

---

#### 4.2 现有文章编辑保存

- [ ] 选择一篇现有文章进行编辑
- [ ] 在编辑器中修改部分内容
- [ ] 添加新的 Markdown 内容
- [ ] 保存文章
- [ ] 确认保存成功
- [ ] 访问前台文章详情页
- [ ] 确认修改后的内容正确显示
- [ ] 确认原有内容未丢失

**预期结果：** 现有文章编辑保存成功，前台显示正确

---

## 🐛 问题记录

### 发现的问题
（在此记录测试过程中发现的问题）

---

## 📊 测试结果

- **总测试项：** 25
- **通过：** 0
- **失败：** 0
- **阻塞：** 0
- **通过率：** 0%

---

**测试执行人：** [姓名]  
**执行时间：** [开始时间] - [结束时间]  
**备注：** 

